// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema
// npx prisma migrate dev --name your_name
// npx prisma studio

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id        String     @id @default(cuid())
  firstName String
  lastName  String
  email     String     @unique
  avatarUrl String?
  units     Unit[]
  files     Conflict[]
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
}

model Unit {
  id               Int              @id @default(autoincrement())
  title            String
  description      String
  badgeUrl         String
  organizationId   Int
  unitOrganization UnitOrganization @relation(fields: [organizationId], references: [id])
  typeId           Int
  unitType         UnitType         @relation(fields: [typeId], references: [id])
  awardsId         Int
  awardsList       Awards           @relation(fields: [awardsId], references: [id])
  authorId         String
  author           User             @relation(fields: [authorId], references: [id])
  files            File[]
  images           Image[]
  createdAt        DateTime         @default(now())
  updatedAt        DateTime         @updatedAt
}

model UnitType {
  id    Int    @id @default(autoincrement())
  value String
  units Unit[]
}

model Awards {
  id     Int    @id @default(autoincrement())
  value  String
  awards Unit[]
}

model UnitOrganization {
  id                Int    @id @default(autoincrement())
  value             String
  unitsOrganization Unit[]
}

model File {
  id        Int      @id @default(autoincrement())
  url       String
  unitId    Int
  unit      Unit     @relation(fields: [unitId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Conflict {
  id          Int      @id @default(autoincrement())
  title       String
  description String
  images      Image[]
  authorId    String
  author      User     @relation(fields: [authorId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Image {
  id         Int      @id @default(autoincrement())
  url        String
  conflictId Int
  conflict   Conflict @relation(fields: [conflictId], references: [id])
  unitId     Int
  unit       Unit     @relation(fields: [unitId], references: [id])
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}
